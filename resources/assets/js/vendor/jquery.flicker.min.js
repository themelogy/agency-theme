/*
* Copyright (C) 2009 Joel Sutherland
* Licenced under the MIT license
* http://www.newmediacampaigns.com/page/jquery-flickr-plugin
*
* Available tags for templates:
* title, link, date_taken, description, published, author, author_id, tags, image*
*/
!function(e){e.fn.jflickrfeed=function(i,a){var t=(i=e.extend(!0,{flickrbase:"http://api.flickr.com/services/feeds/",feedapi:"photos_public.gne",limit:20,qstrings:{lang:"en-us",format:"json",jsoncallback:"?"},cleanDescription:!0,useTemplate:!0,itemTemplate:"",itemCallback:function(){}},i)).flickrbase+i.feedapi+"?",c=!0;for(var n in i.qstrings)c||(t+="&"),t+=n+"="+i.qstrings[n],c=!1;return e(this).each(function(){var c=e(this),n=this;e.getJSON(t,function(t){e.each(t.items,function(e,a){if(e<i.limit){if(i.cleanDescription){var t=/<p>(.*?)<\/p>/g,m=a.description;t.test(m)&&(a.description=m.match(t)[2],null!=a.description&&(a.description=a.description.replace("<p>","").replace("</p>","")))}if(a.image_s=a.media.m.replace("_m","_s"),a.image_t=a.media.m.replace("_m","_t"),a.image_m=a.media.m.replace("_m","_m"),a.image=a.media.m.replace("_m",""),a.image_b=a.media.m.replace("_m","_b"),delete a.media,i.useTemplate){var r=i.itemTemplate;for(var l in a){var p=new RegExp("{{"+l+"}}","g");r=r.replace(p,a[l])}c.append(r)}i.itemCallback.call(n,a)}}),e.isFunction(a)&&a.call(n,t)})})}}(jQuery);
"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,s,a){var i={API_URL:"https://api.instagram.com/v1",initialize:function(e,s){this.elem=s,this.$elem=t(s),this.accessToken=t.fn.spectragram.accessData.accessToken,this.options=t.extend({},t.fn.spectragram.options,e),this.endpoints=this.setEndpoints(),this.messages={defaultImageAltText:"Instagram Photo related with "+this.options.query,notFound:"This user account is private or doesn't have any photos."}},setEndpoints:function(){return{usersSelf:"/users/self/?access_token="+this.accessToken,usersMediaRecent:"/users/self/media/recent/?&count="+this.options.max+"&access_token="+this.accessToken,tagsMediaRecent:"/tags/"+this.options.query+"/media/recent?&count="+this.options.max+"&access_token="+this.accessToken}},getPhotos:function(e){var s=this;s.fetch(e).done(function(e){var a=s.options.query||"User";e.data.length?s.display(e):t.error("Spectragram.js - Error: "+a+" does not have photos.")})},getUserFeed:function(){this.getPhotos(this.endpoints.usersMediaRecent)},getRecentTagged:function(){this.getPhotos(this.endpoints.tagsMediaRecent)},fetch:function(e){var s=this.API_URL+e;return t.ajax({type:"GET",dataType:"jsonp",cache:!1,url:s})},display:function(e){var s,a,i,n,o,r,c,h,d,p=[];if(i=0===t(this.options.wrapEachWith).length,void 0===e.data||200!==e.meta.code||0===e.data.length)i?this.$elem.append(this.messages.notFound):this.$elem.append(t(this.options.wrapEachWith).append(this.messages.notFound));else{c=this.options.max>=e.data.length?e.data.length:this.options.max,h=this.options.size;for(var u=0;u<c;u++)"small"===h?(d=e.data[u].images.thumbnail.url,o=e.data[u].images.thumbnail.height,r=e.data[u].images.thumbnail.width):"medium"===h?(d=e.data[u].images.low_resolution.url,o=e.data[u].images.low_resolution.height,r=e.data[u].images.low_resolution.width):(d=e.data[u].images.standard_resolution.url,o=e.data[u].images.standard_resolution.height,r=e.data[u].images.standard_resolution.width),n=null!==e.data[u].caption?t("<span>").text(e.data[u].caption.text).html():this.messages.defaultImageAltText,a=t("<img>",{alt:n,attr:{height:o,width:r},src:d}),s=t("<a>",{href:e.data[u].link,target:"_blank",title:n}).append(a),i?p.push(s):p.push(t(this.options.wrapEachWith).append(s));this.$elem.append(p)}"function"==typeof this.options.complete&&this.options.complete.call(this)}};jQuery.fn.spectragram=function(e,s){jQuery.fn.spectragram.accessData.accessToken?this.each(function(){var a=Object.create(i);if(a.initialize(s,this),a[e])return a[e](this);t.error("Method "+e+" does not exist on jQuery.spectragram")}):t.error("You must define an accessToken on jQuery.spectragram")},jQuery.fn.spectragram.options={complete:null,max:20,query:"instagram",size:"medium",wrapEachWith:"<li></li>"},jQuery.fn.spectragram.accessData={accessToken:null}}(jQuery,window,document);
// Copyright (c) 2008-2012 Todd Matthews & Steve Purcell
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.fn.tweet=function(t){var r=e.extend({modpath:"/twitter/",username:null,list_id:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"api.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(e,t){return t.tweet_time-e.tweet_time},filter:function(e){return!0}},t),a=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;function n(e,t){if("string"==typeof e){var r=e;for(var a in t){var n=t[a];r=r.replace(new RegExp("{"+a+"}","g"),null===n?"":n)}return r}return e(t)}function i(t,r){return function(){var a=[];return this.each(function(){a.push(this.replace(t,r))}),e(a)}}function s(e){return e.replace(/</g,"&lt;").replace(/>/g,"^&gt;")}function u(t){var i,u,o,_,l={};return l.item=t,l.source=t.source,l.name=t.from_user_name||t.user.name,l.screen_name=t.from_user||t.user.screen_name,l.avatar_size=r.avatar_size,l.avatar_url=function e(t,r){return r?"user"in t?t.user.profile_image_url_https:e(t,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):t.profile_image_url||t.user.profile_image_url}(t,"https:"===document.location.protocol),l.retweet=void 0!==t.retweeted_status,l.tweet_time=(i=t.created_at,Date.parse(i.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))),l.join_text="auto"==r.join_text?(u=t.text).match(/^(@([A-Za-z0-9-_]+)) .*/i)?r.auto_join_text_reply:u.match(a)?r.auto_join_text_url:u.match(/^((\w+ed)|just) .*/im)?r.auto_join_text_ed:u.match(/^(\w*ing) .*/i)?r.auto_join_text_ing:r.auto_join_text_default:r.join_text,l.tweet_id=t.id_str,l.twitter_base="http://"+r.twitter_url+"/",l.user_url=l.twitter_base+l.screen_name,l.tweet_url=l.user_url+"/status/"+l.tweet_id,l.reply_url=l.twitter_base+"intent/tweet?in_reply_to="+l.tweet_id,l.retweet_url=l.twitter_base+"intent/retweet?tweet_id="+l.tweet_id,l.favorite_url=l.twitter_base+"intent/favorite?tweet_id="+l.tweet_id,l.retweeted_screen_name=l.retweet&&t.retweeted_status.user.screen_name,l.tweet_relative_time=function(e){var t=arguments.length>1?arguments[1]:new Date,r=parseInt((t.getTime()-e)/1e3,10);return r<1?"just now":r<60?r+" seconds ago":r<120?"about a minute ago":r<2700?"about "+parseInt(r/60,10).toString()+" minutes ago":r<7200?"about an hour ago":r<86400?"about "+parseInt(r/3600,10).toString()+" hours ago":r<172800?"about a day ago":"about "+parseInt(r/86400,10).toString()+" days ago"}(l.tweet_time),l.entities=t.entities?(t.entities.urls||[]).concat(t.entities.media||[]):[],l.tweet_raw_text=l.retweet?"RT @"+l.retweeted_screen_name+" "+t.retweeted_status.text:t.text,l.tweet_text=e([(o=l.tweet_raw_text,_=l.entities,o.replace(a,function(e){for(var t=/^[a-z]+:/i.test(e)?e:"http://"+e,r=e,a=0;a<_.length;++a){var n=_[a];if(n.url==t&&n.expanded_url){t=n.expanded_url,r=n.display_url;break}}return'<a href="'+s(t)+'">'+s(r)+"</a>"}))]).linkUser().linkHash()[0],l.tweet_text_fancy=e([l.tweet_text]).makeHeart()[0],l.user=n('<a class="tweet_user" href="{user_url}">{screen_name}</a>',l),l.join=r.join_text?n(' <span class="tweet_join">{join_text}</span> ',l):" ",l.avatar=l.avatar_size?n('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',l):"",l.time=n('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',l),l.text=n('<span class="tweet_text">{tweet_text_fancy}</span>',l),l.reply_action=n('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',l),l.retweet_action=n('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',l),l.favorite_action=n('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',l),l}return e.extend({tweet:{t:n}}),e.fn.extend({linkUser:i(/(^|[\W])@(\w+)/gi,'$1<span class="at">@</span><a href="http://'+r.twitter_url+'/$2">$2</a>'),linkHash:i(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="https://twitter.com/search?q=%23$1'+(r.username&&1==r.username.length&&!r.list?"&from="+r.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1</a>'),makeHeart:i(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")}),this.each(function(t,a){var i=e('<ul class="tweet_list">'),s='<p class="tweet_intro">'+r.intro_text+"</p>",o='<p class="tweet_outro">'+r.outro_text+"</p>",_=e('<p class="loading">'+r.loading_text+"</p>");r.username&&"string"==typeof r.username&&(r.username=[r.username]),e(a).unbind("tweet:load").bind("tweet:load",function(){r.loading_text&&e(a).empty().append(_),e.ajax({dataType:"json",type:"post",async:!0,url:r.modpath||"/twitter/",data:{request:function(){r.modpath;var t=null===r.fetch?r.count:r.fetch,a={include_entities:1};if(r.list)return{host:r.twitter_api_url,url:"/1.1/lists/statuses.json",parameters:e.extend({},a,{list_id:r.list_id,slug:r.list,owner_screen_name:r.username,page:r.page,count:t,include_rts:r.retweets?1:0})};if(r.favorites)return{host:r.twitter_api_url,url:"/1.1/favorites/list.json",parameters:e.extend({},a,{list_id:r.list_id,screen_name:r.username,page:r.page,count:t})};if(null===r.query&&1===r.username.length)return{host:r.twitter_api_url,url:"/1.1/statuses/user_timeline.json",parameters:e.extend({},a,{screen_name:r.username,page:r.page,count:t,include_rts:r.retweets?1:0})};var n=r.query||"from:"+r.username.join(" OR from:");return{host:r.twitter_search_url,url:"/1.1/search/tweets.json",parameters:e.extend({},a,{q:n,count:t})}}()},success:function(t,_){t.message&&console.log(t.message);var l=t.response;e(a).empty().append(i),r.intro_text&&i.before(s),i.empty(),void 0!==l.statuses?resp=l.statuses:void 0!==l.results?resp=l.results:resp=l;var c=e.map(resp,u);c=e.grep(c,r.filter).sort(r.comparator).slice(0,r.count),i.append(e.map(c,function(e){return"<li>"+n(r.template,e)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd"),r.outro_text&&i.after(o),e(a).trigger("loaded").trigger(c?"empty":"full"),r.refresh_interval&&window.setTimeout(function(){e(a).trigger("tweet:load")},1e3*r.refresh_interval)}})}).trigger("tweet:load")})}});